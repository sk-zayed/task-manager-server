(function(){"use strict";var e={6562:function(e,t,a){var s=a(144),o=a(8345),r=a(8620),n=a(629),i=a(4009),l=a.n(i);s.ZP.use(o.ZP),s.ZP.use(r.ZP),s.ZP.use(n.ZP),s.ZP.use(l());var u=a(8945),c={snackDuration:5e3,BASE_URL:"https://taskmanager-fuon.onrender.com"};const m=async e=>{delete e["cnfrmpass"],console.log("auth/signup...",e);const t=await u.Z.post(`${c.BASE_URL}/api/auth/register`,e,{headers:{"Content-Type":"application/json"}});return t.data},d=async e=>{const t=await u.Z.post(`${c.BASE_URL}/api/auth/login`,e,{headers:{"Content-Type":"application/json"}});return t.data.data},p="name",h="email",f="token",g="role",v={state:{name:localStorage.getItem(p)||"",email:localStorage.getItem(h)||"",token:localStorage.getItem(f)||"",role:localStorage.getItem(g)||""},getters:{isAuthenticated(e){return!!e.token},isAdmin(e){return"admin"===e.role}},mutations:{setName(e,t){e.name=t},setEmail(e,t){e.email=t},setToken(e,t){e.token=t},setRole(e,t){e.role=t}},actions:{login({commit:e},t){return d(t).then((t=>{const{name:a,email:s,token:o,role:r}=t;return localStorage.setItem(p,a),localStorage.setItem(h,s),localStorage.setItem(f,o),localStorage.setItem(g,r),e("setName",a),e("setEmail",s),e("setToken",o),e("setRole",r),s}))},logout({commit:e}){return localStorage.removeItem(p),localStorage.removeItem(h),localStorage.removeItem(f),localStorage.removeItem(g),e("setName",""),e("setEmail",""),e("setToken",""),e("setRole",""),Promise.resolve()}}};var Z=v;const w=new n.ZP.Store({modules:{auth:Z}});var y=w;u.Z.interceptors.request.use((e=>(e.url.includes("calendar")&&(e.headers["Authorization"]=y.state.auth.token),e)),(e=>Promise.reject(e)));var _=a(998),k=a(3323),b=function(){var e=this,t=e._self._c;return t(_.Z,[t("NavbarComponent"),t(k.Z,{},[t("router-view")],1)],1)},P=[],x=a(5550),C=a(3423),$=a(6570),S=a(9223),q=a(1267),j=a(4324),A=a(3201),I=a(5808),O=a(4525),T=a(6298),E=a(4611),L=a(4017),z=a(3687),R=a(5707),U=a(6313),M=a(7953),N=function(){var e=this,t=e._self._c;return t("v-nav",[t(U.Z,{attrs:{dark:""}},[t(x.Z,{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),t(M.qW,{staticClass:"text-uppercase grey--text"},[t("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[t("span",{staticClass:"font-weight-light"},[e._v("Task")]),t("span",{staticClass:"white--text"},[e._v("Manager")])])],1),t(z.Z),t(M.lj,{staticClass:"hidden-sm-and-down mr-4"},[t(R.Z,{staticClass:"my-3 width",attrs:{"hide-details":"",placeholder:"Search",filled:"",rounded:"",dense:"","single-line":"","append-icon":"mdi-magnify"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.search.apply(null,arguments))}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),this.store.authenticated?t(M.lj,{staticClass:"hidden-sm-and-down",attrs:{to:"/profile"}},[t($.Z,{staticClass:"font-weight-light",attrs:{text:""}},[e._v(" Welcome "+e._s(e.store.name)+"!! ")])],1):e._e(),this.store.authenticated?t(M.lj,{staticClass:"hidden-sm-and-down",on:{click:e.logout}},[t($.Z,{staticClass:"font-weight-light",attrs:{text:""}},[e._v(" Logout "),t(j.Z,{attrs:{right:""}},[e._v("mdi-export")])],1)],1):e._e(),this.store.authenticated?e._e():t(M.lj,{staticClass:"hidden-sm-and-down"},[t($.Z,{staticClass:"font-weight-light",attrs:{text:"",to:"/login"}},[e._v(" Login "),t(j.Z,{attrs:{right:""}},[e._v("mdi-import")])],1)],1),this.store.authenticated?e._e():t(M.lj,{staticClass:"hidden-sm-and-down"},[t($.Z,{staticClass:"font-weight-light",attrs:{text:"",to:"/signup"}},[e._v(" SignUp "),t(j.Z,{attrs:{right:""}},[e._v("mdi-account-plus")])],1)],1)],1),t(L.Z,{attrs:{absolute:"",temporary:"",dark:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(A.Z,{attrs:{column:"","align-center":""}},[t(q.Z,{staticClass:"mt-6"},[t(C.Z,{attrs:{size:"100"}},[e.store.authenticated?t("img",{attrs:{src:"favicon.ico",alt:"Profile picture"}}):t(j.Z,{attrs:{"aria-label":"Account",role:"img",size:"100"}},[e._v(" mdi-account ")])],1)],1),t("p",{staticClass:"subheading white--text mt-2"},[e._v(" "+e._s(e.store.name||"Welcome to task manager!")+" ")])],1),t(S.Z),t(I.Z,{staticClass:"pt-0"},[e._l(e.links,(function(a){return t(O.Z,{key:a.title,attrs:{to:a.route}},[t(E.Z,[t(j.Z,[e._v(e._s(a.icon))])],1),t(T.km,[t(T.V9,{staticClass:"font-weight-light"},[e._v(e._s(a.title))])],1)],1)})),this.store.authenticated?t(O.Z,{on:{click:e.logout}},[t(E.Z,[t(j.Z,[e._v("mdi-export")])],1),t(T.km,[t(T.V9,{staticClass:"font-weight-light"},[e._v("Logout")])],1)],1):e._e(),this.store.authenticated?e._e():t(O.Z,{attrs:{to:"/signup"}},[t(E.Z,[t(j.Z,[e._v("mdi-account-plus")])],1),t(T.km,[t(T.V9,{staticClass:"font-weight-light"},[e._v("SignUp")])],1)],1),this.store.authenticated?e._e():t(O.Z,{attrs:{to:"/login"}},[t(E.Z,[t(j.Z,[e._v("mdi-import")])],1),t(T.km,[t(T.V9,{staticClass:"font-weight-light"},[e._v("Login")])],1)],1)],2)],1)],1)},B=[],V={data(){return{store:{authenticated:this.$store.getters.isAuthenticated,name:this.$store.state.auth.name,email:this.$store.state.auth.email,profile:""},drawer:null,query:"",links:[{route:"/",icon:"mdi-view-dashboard-variant",title:"Boards"},{route:"/calendar",icon:"mdi-calendar",title:"Calender"},{route:"/teams",icon:"mdi-account-group",title:"Teams"}]}},methods:{search(){console.log(this.query)},logout(){this.$store.dispatch("logout").then((()=>{s.ZP.$toast.open({message:"Logout successful.",duration:c.duration,type:"success"})})).catch((e=>{s.ZP.$toast.open({message:e.message,duration:c.duration,type:"error"})}))}}},W=V,D=a(1001),H=(0,D.Z)(W,N,B,!1,null,"9654224e",null),F=H.exports,Y={name:"App",components:{NavbarComponent:F}},G=Y,J=(0,D.Z)(G,b,P,!1,null,null,null),K=J.exports,Q=function(){var e=this,t=e._self._c;return t(k.Z,[t("h1",{staticClass:"font-weight-light"},[e._v("Home")]),t(S.Z)],1)},X=[],ee={name:"HomeComponent",data(){return{}},methods:{}},te=ee,ae=(0,D.Z)(te,Q,X,!1,null,null,null),se=ae.exports,oe=a(5125),re=function(){var e=this,t=e._self._c;return t(k.Z,[t(oe.Z,{ref:"form",staticClass:"pt-4"},[t(R.Z,{attrs:{rules:[e.rules.required,e.rules.email],label:"Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),t(R.Z,{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.password],type:e.show?"text":"password",label:"Password"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t($.Z,{attrs:{dark:""},on:{click:e.login}},[e._v("Login")])],1)],1)},ne=[],ie=(a(7658),{name:"LoginPage",data(){return{show:!1,processing:!1,rules:{required:e=>!!e||"Required.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Invalid e-mail."},password:e=>e.length>=8||"Min 8 characters are required"},form:{email:"",password:""}}},methods:{login(){this.$refs.form.validate()&&this.$store.dispatch("login",this.form).then((()=>{s.ZP.$toast.open({message:"Login successful.",duration:c.duration,type:"success"}),this.$router.push({name:"home"})})).catch((e=>{s.ZP.$toast.open({message:e.response.data.message,duration:c.duration,type:"error"}),this.form.email="",this.form.password=""}))}}}),le=ie,ue=(0,D.Z)(le,re,ne,!1,null,null,null),ce=ue.exports,me=function(){var e=this,t=e._self._c;return t(k.Z,[t(oe.Z,{ref:"form",staticClass:"pt-4"},[t(R.Z,{attrs:{rules:[e.rules.required],label:"Name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t(R.Z,{attrs:{rules:[e.rules.required,e.rules.email],label:"Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),t(R.Z,{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.password],type:e.show?"text":"password",label:"Password"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t(R.Z,{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.cnfrmpass],type:e.show?"text":"password",label:"Confirm password"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.form.cnfrmpass,callback:function(t){e.$set(e.form,"cnfrmpass",t)},expression:"form.cnfrmpass"}}),t($.Z,{attrs:{dark:""},on:{click:e.signUp}},[e._v("SignUp")])],1)],1)},de=[],pe={name:"SignupPage",data(){return{show:!1,processing:!1,rules:{required:e=>!!e||"Required.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Invalid e-mail."},password:e=>e.length>=8||"Min 8 characters are required",cnfrmpass:e=>this.cnfrmpass(e)||"Password did not match"},form:{name:"",email:"",password:"",cnfrmpass:""}}},methods:{cnfrmpass(e){return this.form.password===e},async signUp(){if(this.$refs.form.validate())try{console.log("funn");const e=await m(this.form);console.log("vue --\x3e ",e),"success"===e.status?(s.ZP.$toast.open({message:"Registration successful.",duration:c.duration,type:"success"}),this.$router.push({name:"home"})):"error"===e.status&&s.ZP.$toast.open({message:e.message,duration:c.duration,type:"error"})}catch(e){s.ZP.$toast.open({message:e.message,duration:c.duration,type:"error"})}}}},he=pe,fe=(0,D.Z)(he,me,de,!1,null,null,null),ge=fe.exports;const ve={authorize:["admin","general"]},Ze=new o.ZP({mode:"history",routes:[{name:"home",path:"/",component:se},{name:"signup",path:"/signup",component:ge},{name:"login",path:"/login",component:ce},{name:"calendar",path:"/calendar",component:se,meta:ve},{name:"teams",path:"/teams",component:se,meta:ve}]});Ze.beforeEach(((e,t,a)=>{const o=e.meta.authorize;return o&&!y.getters.isAuthenticated?(s.ZP.$toast.open({message:"Please login first.",duration:c.duration,type:"error"}),a({name:"login"})):o&&!o.includes(y.state.auth.role)?(s.ZP.$toast.open({message:"You do not have sufficient access to this page.",duration:c.duration,type:"error"}),a({path:"/"})):void a()}));var we=Ze,ye=a(8864);s.ZP.use(ye.Z);var _e=new ye.Z({});s.ZP.config.productionTip=!1,new s.ZP({vuetify:_e,router:we,store:y,render:e=>e(K)}).$mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,r){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],o=e[c][1],r=e[c][2];for(var i=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,r<n&&(n=r));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,r,n=s[0],i=s[1],l=s[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var c=l(a)}for(t&&t(s);u<n.length;u++)r=n[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},s=self["webpackChunktask_manager_vue"]=self["webpackChunktask_manager_vue"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6562)}));s=a.O(s)})();
//# sourceMappingURL=app.2805340b.js.map